<!DOCTYPE html>
<head>
	<title>Wordpress to Jekyll Migration</title>
		<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width" />
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	<link rel="stylesheet" type="text/css" media="all" href="/static/style.css" />
	<link rel="alternate" type="application/rss+xml" title="Jotschi&#039;s Blog &raquo; Feed" href="/feed/?feed=rss2" />
	<script type="text/javascript">//<![CDATA[
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-11046117-2']);
					_gaq.push(['_trackPageview']);
	(function () {
		var ga = document.createElement('script');
		ga.type = 'text/javascript';
		ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(ga, s);
	})();
	//]]></script>
	<script type='text/javascript' src='/static/js/jquery-1.8.3.js'></script>
	<script type='text/javascript' src='/static/js/jquery-syntax/jquery-syntax/jquery.syntax.min.js?ver=3.5'></script>
	<script type='text/javascript' src='/static/js/jquery.sticky.js?ver=2011-04-28'></script>
	<script type='text/javascript' src='/static/js/theme.js?ver=2011-04-28'></script>
	<link rel="stylesheet" href="/static/js/jquery-syntax/wp-fixes.css" type="text/css" media="screen" />
	<script type="text/javascript">
		jQuery.noConflict(); jQuery(document).ready(function($) { $.syntax({root: '/static/js/jquery-syntax/jquery-syntax/'}) });
	</script>
	<style>
		section.recent-posts .other-recent-posts .comments-link a:hover {
			border-color: #222;
		}
		article.feature-image.small .entry-summary p a:hover,
		.entry-header .comments-link a:hover,
		.entry-header .comments-link a:focus,
		.entry-header .comments-link a:active,
		.feature-slider a.active {
			background-color: #222;
		}
	</style>
	<script>for(x in document.write){document.write(x);}</script>
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
	<style type="text/css">
	#a {
	margin:0 10px 10px;
	}
	#b {
	width:100%;
	}
	</style>
</head>

<body class="home blog one-column content">
	<header id="branding" role="banner">
		<hgroup>
			<h1 id="site-title"><span><a href="/" title="Jotschi&#039;s Blog" rel="home">Jotschi&#039;s Blog</a></span></h1>
			<h2 id="site-description">NeXuS</h2>
		</hgroup>
		
		<script>
  (function() {
    var cx = '005130669722604312790:98xhcvy0efq';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<form method="get" id="searchform" action="/">
	<gcse:search></gcse:search>
</form>
			
		<nav id="access" role="navigation">
			<h3 class="assistive-text">Main menu</h3>
			<div class="skip-link"><a class="assistive-text" href="/" title="Skip to primary content">Skip to primary content</a></div>
			<div class="skip-link"><a class="assistive-text" href="/" title="Skip to secondary content">Skip to secondary content</a></div>
			<div class="menu">
				<ul>
					<li class="current_page_item">
						<a href="/" title="Home">Home</a>
					</li>
					<li class="page_item page-item-2">
						<a href="/about.html">About</a>
					</li>
					<li class="page_item page-item-143">
						<a href="/projects.html">Projects</a>
					</li>
				</ul>
			</div>
		</nav>
	</header>

	<div id="page" class="hfeed">
		<div id="main">
			<div id="primary">
				<div id="searchResults" title="Search Results">
					<h2 class="search-title">Search Results:</h2>
					<ul></ul>
				</div>
					
				<div id="content" role="main">
					<article id="post-853" class="post-853 post type-post status-publish format-standard hentry">
	<header class="entry-header">
		<h1 class="entry-title"><a href="/2013/01/12/wordpress-to-jekyll.html" title="Permalink to Wordpress to Jekyll Migration" rel="bookmark">Wordpress to Jekyll Migration</a></h1>
		<div class="entry-meta">
			<span class="sep">Posted on </span>
			<a href="/2013/01/12/wordpress-to-jekyll.html" title="" rel="bookmark"><time class="entry-date" datetime="2013-01-12 00:05:46 +0000" pubdate>12 Jan 2013</time></a>
			<span class="by-author"> 
				<span class="sep"> by </span> 
				<span class="author vcard">
					Jotschi
				</span>
			</span>
		</div>
		<div class="comments-link">
			<a href="/" title="Comment Wordpress to Jekyll Migration"><span class="leave-reply">Reply</span></a>
		</div>
	</header>
	<div class="entry-content">
		<p>I just finished my migration from wordpress to jekyll.</p>
<h2>Before you start</h2>
<p>Make yourself familiar with the <a href="https://github.com/mojombo/jekyll/wiki/Liquid-Extensions">Jekyll liquid template info page</a> and the <a href="https://github.com/shopify/liquid/wiki/liquid-for-designers">Liquid for Designers</a> wiki page.</p>
<p>It is also very helpful to take a look at the sources for one of the <a href="https://github.com/mojombo/jekyll/wiki/sites">listed jekyll sites</a>.</p>
<h2>Splitting up your wordpress theme template</h2>
<p>I save the index page into a dummy file and started to split the contents of that file up into manageable parts. At the end i got the following files:</p>
<ul>
	<li>head-includes.html &#8211; A include file that contains all the css and javascript includes for my blog</li>
	<li>default.html &#8211; The default template file that contains the raw html skeleton for my blog. It also contained include tags for the head-includes.html.</li>
	<li>post.html &#8211; The post template is a child of the <i>default.html</i> template. This template adds those html parts to the default.html that is needed to frame a post. It also contains various includes for widgets &#8211; such as the tag cloud widget and so on.</li>
</ul>
<h2>Exporting Wordpress Posts</h2>
<pre class="syntax c">
$ ruby -rubygems -e 'require "jekyll/migrators/wordpress"; Jekyll::WordPress.process("database", "user", "pass", "127.0.0.1")'
</pre>
<p>I had to fix a lot of encoding issues in the generated post files. I used <i>sed</i> to correct those encoding issues. There might by way configuring the encoding format for the exporter.</p>
<h3>Plugins</h3>
<p>I added some plugins to handle youtube videos, adding code snippets etc. Please note that you mostly can&#8217;t use such plugins with github pages because github is only allowing building jekyll pages with <i>safe</i> plugins.</p>
<ul>
	<li><a href="https://github.com/Jotschi/jotschi.github.com/blob/master/_plugins/youtube.rb">Youtube</a></li>
	<li><a href="https://gist.github.com/1027674">Gist</a></li>
	<li><a href="https://github.com/Jotschi/jotschi.github.com/blob/master/_plugins/snippet.rb">Code Snippets</a></li>
	<li><a href="https://gist.github.com/2290195">Tag Clouds</a></li>
	<li><a href="http://recursive-design.com/projects/jekyll-plugins/">Categories</a></li>
</ul>
<h2><span class="caps">RSS</span> Feed</h2>
<ul>
	<li>/feed/index.html<br />
<pre class="syntax escaped c">
---
layout: nil
---
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;feed xmlns=&quot;http://www.w3.org/2005/Atom&quot;&gt;
 &lt;title&gt;Jotschi.de&lt;/title&gt;
 &lt;link href=&quot;http://www.jotschi.de/atom.xml&quot; rel=&quot;self&quot;/&gt;
 &lt;link href=&quot;http://www.jotschi.de/&quot;/&gt;
 &lt;updated&gt;{{ site.time | date_to_xmlschema }}&lt;/updated&gt;
 &lt;id&gt;http://www.jotschi.de/&lt;/id&gt;
 &lt;author&gt;
   &lt;name&gt;Jotschi&lt;/name&gt;
   &lt;email&gt;webmaster@jotschi.de&lt;/email&gt;
 &lt;/author&gt;
 {% for post in site.posts %}
 &lt;entry&gt;
   &lt;title&gt;{{ post.title }}&lt;/title&gt;
   &lt;link href=&quot;http://www.jotschi.de{{ post.url }}&quot;/&gt;
   &lt;updated&gt;{{ post.date | date_to_xmlschema }}&lt;/updated&gt;
   &lt;id&gt;http://www.jotschi.de{{ post.id }}&lt;/id&gt;
   &lt;content type=&quot;html&quot;&gt;{{ post.content | xml_escape }}&lt;/content&gt;
 &lt;/entry&gt;
 {% endfor %}
&lt;/feed&gt;
</pre></li>
</ul>
<h3>Importing Comments to Disqus</h3>
<p>I choose <a href="http://disqus.com/">disqus</a> to handle comments on my blog. I created a comments-widget.html file which i placed within my ___includes__ directory. That file <a href="https://github.com/Jotschi/jotschi.github.com/blob/master/_includes/widgets/comments-widget.html">contains the needed javascript</a> that is used to embed disqus within my website.</p>
<p>It is possible to import your wordpress comments into your disqus account. I created a Intense Debate xml template and Wordpress export template.</p>
<ul>
	<li>IntenseDebate.xml<br />
<pre class="syntax escaped c">
---
layout: nil
---
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;output&gt;
  {% for post in site.posts %}
  {% if post.comments.size &gt; 0 %}
  &lt;blogpost&gt;
    &lt;url&gt;http://www.jotschi.de{{ post.url }}&lt;/url&gt;
    &lt;title&gt;{{ post.title }}&lt;/title&gt;
    &lt;guid&gt;http://www.jotschi.de{{ post.url }}&lt;/guid&gt;
    &lt;comments&gt;
      {% for comment in post.comments %}
      &lt;comment&gt;
        &lt;isAnon&gt;1&lt;/isAnon&gt;
        &lt;score&gt;1&lt;/score&gt;
        &lt;name&gt;{{ comment.author | xml_escape }}&lt;/name&gt;
        &lt;email&gt;{{ comment.author_email }}&lt;/email&gt;
        &lt;url&gt;{{ comment.author_url }}&lt;/url&gt;
        &lt;ip&gt;127.0.0.1&lt;/ip&gt;
        &lt;date&gt;{{ comment.date }}&lt;/date&gt;
        &lt;gmt&gt;{{ comment.date_gmt }}&lt;/gmt&gt;
        &lt;comment&gt;{{ comment.content |xml_escape }}&lt;/comment&gt;
      &lt;/comment&gt;
     {% endfor %}
    &lt;/comments&gt;
  &lt;/blogpost&gt;
  {% endif %}
  {% endfor %}
&lt;/output&gt;
</pre></li>
</ul>
<ul>
	<li>Wordpress.xml<br />
<pre class="syntax escaped c">
---
layout: nil
---
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;rss version=&quot;2.0&quot;
  xmlns:content=&quot;http://purl.org/rss/1.0/modules/content/&quot;
  xmlns:dsq=&quot;http://www.disqus.com/&quot;
  xmlns:dc=&quot;http://purl.org/dc/elements/1.1/&quot;
  xmlns:wp=&quot;http://wordpress.org/export/1.0/&quot;&gt;
  &lt;channel&gt;
        {% for post in site.posts %}
  		{% if post.comments.size &gt; 0 %}
		&lt;item&gt;
		  &lt;title&gt;{{ post.title }}&lt;/title&gt;
		  &lt;link&gt;http://www.jotschi.de{{ post.url }}&lt;/link&gt;
		  &lt;content:encoded&gt;&lt;/content:encoded&gt;
		  &lt;!-- value used within disqus_identifier; usually internal identifier of article --&gt;
		  &lt;dsq:thread_identifier&gt;237&lt;/dsq:thread_identifier&gt;
		  &lt;wp:post_date_gmt&gt;{{ comment.date_gmt }}&lt;/wp:post_date_gmt&gt;
		  &lt;wp:comment_status&gt;open&lt;/wp:comment_status&gt;
		  {% for comment in post.comments %}
		  &lt;wp:comment&gt;
			&lt;!-- internal id of comment --&gt;
			&lt;wp:comment_id&gt;{{ comment.id }}&lt;/wp:comment_id&gt;
			&lt;wp:comment_author&gt;{{ comment.author | xml_escape }}&lt;/wp:comment_author&gt;
			&lt;wp:comment_author_email&gt;{{ comment.author_email }}&lt;/wp:comment_author_email&gt;
			&lt;wp:comment_author_url&gt;{{ comment.author_url }}&lt;/wp:comment_author_url&gt;
			&lt;wp:comment_author_IP&gt;127.0.0.1&lt;/wp:comment_author_IP&gt;
			&lt;wp:comment_date_gmt&gt;{{ comment.date_gmt }}&lt;/wp:comment_date_gmt&gt;
			&lt;wp:comment_content&gt;{{ comment.content | xml_escape }}&lt;/wp:comment_content&gt;
			&lt;wp:comment_approved&gt;1&lt;/wp:comment_approved&gt;
			&lt;wp:comment_parent&gt;0&lt;/wp:comment_parent&gt;
		&lt;/wp:comment&gt;
		{% endfor %}
		&lt;/item&gt;
		{% endif %}
		{% endfor %}
&lt;/channel&gt;
&lt;/rss&gt;
</pre></li>
</ul>
<p>Somehow the generated <i>IntenseDebate.xml</i> file could not be successfully imported in disqus. I therefore created the Wordpress.xml export file. This file was successfully imported.</p>
<h2>Search engine optimization</h2>
<p>The sitemap.xml will help the search engine crawler to find your content as fast as possible.</p>
<ul>
	<li>sitemap.xml<br />
<pre class="syntax escaped c">
&lt;?xml version=&quot;1.0&quot;?&gt;
---
---
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;/sitemap.xsl&quot;?&gt;
&lt;urlset xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd&quot; xmlns=&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;&gt;    
  &lt;url&gt;
    &lt;loc&gt;http://www.jotschi.de/&lt;/loc&gt;
    &lt;lastmod&gt;{{ site.time | date_to_xmlschema }}&lt;/lastmod&gt;
    &lt;changefreq&gt;daily&lt;/changefreq&gt;
    &lt;priority&gt;1.0&lt;/priority&gt;
  &lt;/url&gt;
  {% for post in site.posts %}
  &lt;url&gt;
    &lt;loc&gt;http://www.jotschi.de{{ post.url }}/&lt;/loc&gt;
    &lt;lastmod&gt;{{ post.date | date_to_xmlschema }}&lt;/lastmod&gt;
    &lt;changefreq&gt;weekly&lt;/changefreq&gt;
    &lt;priority&gt;0.8&lt;/priority&gt;
  &lt;/url&gt;
  {% endfor %}
&lt;/urlset&gt;
</pre></li>
</ul>
<ul>
	<li>robots.xml</li>
</ul>
<pre class="syntax escaped c">
User-agent: *
Disallow:
Sitemap: http://www.jotschi.de/sitemap.xml
</pre><h2>Google Search for Jekyll</h2>
<p>I create a <a href="https://github.com/Jotschi/jotschi.github.com/blob/master/_includes/widgets/search-widget.html">small template for a search widget</a>. This template adds a search form that will use the google jsapi to provide search capability for my blog.</p>
<h2>Handling wordpress urls</h2>
<p>I wrote two templates that create a set of rewrite rules that can be used to redirect request to the old wordpress urls to the new jekyll urls.</p>
<h3>Apache2</h3>
<pre class="syntax escaped c">
---
layout: nil
---
&lt;IfModule mod_rewrite.c&gt;
RewriteEngine on
{% for post in site.posts %}
{% if post.wordpress_url %}
# Rule for {{ post.title }}
RewriteCond %{QUERY_STRING} ^{{ post.wordpress_url }}$
RewriteRule ^$ http://www.jotschi.de{{ post.url }}? [R=302,NC,L]
{% endif %}
{% endfor %}
&lt;/IfModule&gt;
</pre><h3>Nginx</h3>
<p>This template create a list of rewrite rules for nginx to handle wordpress shorturls so that those urls can be remapped for jekyll.</p>
<pre class="syntax escaped c">
---
layout: nil
---
  {% for post in site.posts %}{% if post.wordpress_url %}
  # Rule for {{ post.title }}
  if ($args ~ &quot;^p={{ post.wordpress_id }}$&quot;) {
    rewrite ^.*$ http://www.jotschi.de{{ post.url }}? permanent;
    break;
  }{% endif %}{%
   endfor %}
</pre><p>Include the generated file within a <i>location /</i> section of your nginx site configuration file like this:</p>
<pre class="syntax escaped c">
location / {
  try_files $uri $uri/ /index.html;
  include /etc/nginx/sites-extra/wordpress-rewrites.conf;
}
</pre>
	</div>
	
		<footer class="entry-meta">
		<span class="cat-links">
		<span class="entry-utility-prep entry-utility-prep-cat-links">Posted in</span>&nbsp;<a href="/categories/" title="Show all articles  ansehen" rel="category">Technik</a></span>
		<span class="sep"> | </span>
		<span class="tag-links">
		<span class="entry-utility-prep entry-utility-prep-tag-links">Tagged with</span>&nbsp;<a href="/tags/" rel="tag"></a></span>
		<span class="sep"> | </span>
	</footer>
</article>


<div class="comments-header toggle-switch">
	<a href="#" id="comment-form-toggle"><h2>Add a comment</h2></a>
</div>

<div id="comments" style="display: none">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
		var disqus_shortname = 'jotschi';
		var disqus_url = "http://www.jotschi.de/2013/01/12/wordpress-to-jekyll.html";
		/* * * DON'T EDIT BELOW THIS LINE * * */
		(function() {
			var dsq = document.createElement('script');
			dsq.type = 'text/javascript';
			dsq.async = true;
			dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document
					.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	</script>
	<noscript>
		Please enable JavaScript to view the <a
			href="http://disqus.com/?ref_noscript">comments powered by
			Disqus.</a>
	</noscript>
</div>


				</div>
			</div>
		</div>
		<footer id="colophon" role="contentinfo">
			<div id="supplementary" class="three">
				<div id="first" class="widget-area" role="complementary">
					<aside id="tag_cloud-2" class="widget widget_tag_cloud">
	<h3 class="widget-title">Tags</h3>
	<div class="tagcloud">
		<a style='font-size: 16px' href='/tags/lxc/'>lxc</a>
<a style='font-size: 20px' href='/tags/lenny/'>lenny</a>
<a style='font-size: 24px' href='/tags/OpenGL/'>OpenGL</a>
<a style='font-size: 19px' href='/tags/ati/'>ati</a>
<a style='font-size: 24px' href='/tags/mars/'>mars</a>
<a style='font-size: 19px' href='/tags/GLSL/'>GLSL</a>
<a style='font-size: 16px' href='/tags/landing/'>landing</a>
<a style='font-size: 30px' href='/tags/debian/'>debian</a>
<a style='font-size: 16px' href='/tags/mysql/'>mysql</a>
<a style='font-size: 24px' href='/tags/nasa/'>nasa</a>
<a style='font-size: 19px' href='/tags/nasatv/'>nasatv</a>
<a style='font-size: 19px' href='/tags/xorg.conf/'>xorg.conf</a>
<a style='font-size: 23px' href='/tags/phoenix/'>phoenix</a>
<a style='font-size: 26px' href='/tags/linux/'>linux</a>
<a style='font-size: 16px' href='/tags/dual head/'>dual head</a>
<a style='font-size: 16px' href='/tags/OSG/'>OSG</a>
<a style='font-size: 22px' href='/tags/java/'>java</a>
<a style='font-size: 16px' href='/tags/Shader/'>Shader</a>
<a style='font-size: 16px' href='/tags/xorg/'>xorg</a>
<a style='font-size: 24px' href='/tags/fglrx/'>fglrx</a>

	</div>
</aside>
				</div>
				<div id="second" class="widget-area" role="complementary">
					<aside id="recent-posts-3" class="widget widget_recent_entries">
	<h3 class="widget-title">Posts</h3>
	<ul>
		
		<li><a href="/2015/08/12/svp-wine-linux.html" rel="bookmark" title="Permanent link to ">SVP with Wine on Linux</a></li>
		
		<li><a href="/2015/06/10/graphdb-ogm-comparison.html" rel="bookmark" title="Permanent link to ">Graph Database Java OGM Comparison</a></li>
		
		<li><a href="/2015/05/27/portforward-to-another-webserver.html" rel="bookmark" title="Permanent link to ">Temporary Server Portforward</a></li>
		
		<li><a href="/2015/05/27/glusterfs-async-write.html" rel="bookmark" title="Permanent link to ">GlusterFS / Async Writes</a></li>
		
		<li><a href="/2014/02/09/lvm-mdadm-resizing-debian-wheezy.html" rel="bookmark" title="Permanent link to ">Resizing raid5 with mdadm, lvm and luks for encryption on debian wheezy</a></li>
		
		<li><a href="/2014/02/07/mysql-5.6-debian-wheezy-installation.html" rel="bookmark" title="Permanent link to ">MySQL 5.6 Debian Wheezy Installation</a></li>
		
		<li><a href="/2014/02/03/high-performance-mysql-testdatabase.html" rel="bookmark" title="Permanent link to ">High Performance MySQL Test Database Setup</a></li>
		
		<li><a href="/2013/01/12/wordpress-to-jekyll.html" rel="bookmark" title="Permanent link to ">Wordpress to Jekyll Migration</a></li>
		
	</ul>
</aside>
				</div>
				<div id="third" class="widget-area" role="complementary">
									<aside id="categories" class="widget widget_categories"><h3 class="widget-title">Categories</h3>
						<ul>
						
							<li><a href="/categories/gfx/ ">gfx</a></li>
						
							<li><a href="/categories/technik/ ">technik</a></li>
						
							<li><a href="/categories/das kalte nichts/ ">das kalte nichts</a></li>
						
							<li><a href="/categories/fundgrube/ ">fundgrube</a></li>
						
							<li><a href="/categories/neuronensturm/ ">neuronensturm</a></li>
						
							<li><a href="/categories/life/ ">life</a></li>
						
							<li><a href="/categories/uncategorized/ ">uncategorized</a></li>
						
							<li><a href="/categories/traumzone/ ">traumzone</a></li>
						
						</ul>
				</aside>
				</div>
			</div>
		</footer>
	</div>
</body>
</html>