<!DOCTYPE html>


<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="alternate" href="/index.xml" type="application/rss+xml" title="Jotschi&#39;s Blog">
		<link rel="icon" href="http://jotschi.de//favicon.ico">
		<title>Eclipse CDT Cross Platform Development Within A Chroot Environment - Jotschi&#39;s Blog</title>
		
		<link rel="stylesheet" href="http://jotschi.de//css/highlight.js.min.css">
		<link rel="stylesheet" href="http://jotschi.de//css/bootstrap.min.css">
		<link rel="stylesheet" href="http://jotschi.de//css/bootstrap-theme.css">
		<link rel="stylesheet" href="http://jotschi.de//css/theme.css">
		<link rel="stylesheet" href="http://jotschi.de//css/bootie-docs.css">
	</head>

<body role="document">

	
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="http://jotschi.de//">Jotschi&#39;s Blog</a>
			</div>
			<div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li ><a href="http://jotschi.de//">Home</a></li>
			
				
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Categories<span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
						
							<li><a href="http://jotschi.de//categories/code">Code</a></li>
						
							<li><a href="http://jotschi.de//categories/electronics">Electronics</a></li>
						
							<li><a href="http://jotschi.de//categories/gfx">Gfx</a></li>
						
							<li><a href="http://jotschi.de//categories/linux">Linux</a></li>
						
							<li><a href="http://jotschi.de//categories/random">Random</a></li>
						
							<li><a href="http://jotschi.de//categories/space">Space</a></li>
						
						</ul>
					</li>
				
				</ul>
			</div>
		</div>
	</nav>

<div class="container">

<div class="row">
	<div class="col-sm-8 doc-main">
		<main role="main">
			<article>
				<a id="title"></a>
				<h1 class="doc-entry-title">Eclipse CDT Cross Platform Development Within A Chroot Environment</h1>
				<div class="doc-entry-meta">
					<span><time datetime="2011-07-08">July 08, 2011</time></span>
				</div>
				<section>
					<div class="paragraph">
<p>This post is about how to configure eclipse to work with a chroot environment that is setup for cross compiling against ARM architecture.</p>
</div>
<div class="paragraph">
<p>Please refer to my post &lt;a href="/?p=594"&gt;Cross Compile Pandaboard PowerVR OpenGL ES2 Example&lt;/a&gt; if you want to know how to setup a chroot environment for cross compiling.</p>
</div>
<div class="sect2">
<h3 id="_1_install_sudo_and_configure_sudo">1. Install sudo and configure sudo</h3>
<div class="paragraph">
<p>Install sudo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">apt-get install sudo</code></pre>
</div>
</div>
<div class="paragraph">
<p>Allow every user that is within the sudo group to execute the chroot command without entering a password by adding the line to /etc/sudoers:</p>
</div>
<div class="paragraph">
<p><em>/etc/sudoers</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">%sudo   ALL= NOPASSWD: /usr/sbin/chroot</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_prepare_the_project">2. Prepare the project</h3>
<div class="paragraph">
<p>The project must be located within the within the chroot environment. You could use bind mounts to create a mountpoint that connects your workspace project with a folder inside the chroot enviroment. I just placed the project itself inside the chroot environment and created a symlink that points to my workspace. Keep in mind to close your project or eclipse if you move the project files outside of eclipse.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1. Create your CDT project.</p>
</li>
<li>
<p>2. Close the project within eclipse.</p>
</li>
<li>
<p>3. Move the project directory from e.g.: ~/workspace/MyProject/ to ~/mychroot/opt/MyProject</p>
</li>
<li>
<p>4. Create a symlink inside of ~/workspace with the name &lt;i&gt;MyProject&lt;/i&gt; that points to ~/mychroot/opt/MyProject</p>
</li>
<li>
<p>5. Open the project within eclipse</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_3_create_a_external_build_script">3. Create a external build script</h3>
<div class="paragraph">
<p>This example script (e.g: ~/workspace/MyProject/compile.sh) will execute the bash command inside of the chroot environment which is located at $HOME/mychroot. The bash command will switch into the project location inside the chroot environment and execute make. Of course you can optimize the script to make it more generic and so on. But for now i&#8217;ll keep it simple.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">#!/bin/bash
sudo chroot $HOME/mychroot/  bash -c 'cd /opt/MyProject/; make clean; make'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_4_configure_your_eclipse_cdt_project">4. Configure your eclipse cdt project</h3>
<div class="paragraph">
<p>Now we have to change the builder for our project. Since we don&#8217;t want to use the host environment to build the project we need to tell eclipse to use our compile.sh script which we created earlier. Go into &lt;i&gt;project properties &#8594; C/C++ Build &#8594; Builder Settings&lt;/i&gt; and select <em>External builder</em>. Point the Build command to your compile.sh.</p>
</div>
<div class="paragraph">
<p>To fix syntax errors within your project you have to add the correct includes of course. Go to &lt;i&gt;project properties &#8594; C/C++ Build &#8594; Setting &#8594; Tool Settings&lt;/i&gt; and add the include directories from your chroot enviroment. If you are using xapt to install cross libraries please note that those files are usually located at <em>/usr/arm-linux-gnueabi/</em>.</p>
</div>
<div class="paragraph">
<p>Example for libx11-dev</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">root@NeXuS:/# dpkg -L  libx11-dev-armel-cross
/.
/usr
/usr/share
/usr/share/doc
/usr/share/doc/libx11-dev-armel-cross
/usr/share/doc/libx11-dev-armel-cross/README
/usr/arm-linux-gnueabi
/usr/arm-linux-gnueabi/include
/usr/arm-linux-gnueabi/include/X11
/usr/arm-linux-gnueabi/include/X11/Xregion.h
/usr/arm-linux-gnueabi/include/X11/Xresource.h
/usr/arm-linux-gnueabi/include/X11/Xlib.h
/usr/arm-linux-gnueabi/include/X11/cursorfont.h
/usr/arm-linux-gnueabi/include/X11/XKBlib.h
/usr/arm-linux-gnueabi/include/X11/Xlibint.h
/usr/arm-linux-gnueabi/include/X11/Xutil.h
/usr/arm-linux-gnueabi/include/X11/XlibConf.h
/usr/arm-linux-gnueabi/include/X11/ImUtil.h
/usr/arm-linux-gnueabi/include/X11/Xlocale.h
/usr/arm-linux-gnueabi/include/X11/Xcms.h
/usr/arm-linux-gnueabi/lib
/usr/arm-linux-gnueabi/lib/pkgconfig
/usr/arm-linux-gnueabi/lib/pkgconfig/x11.pc
/usr/arm-linux-gnueabi/lib/libX11.a
/usr/arm-linux-gnueabi/lib/libX11.so</code></pre>
</div>
</div>
</div>

				</section>
			</article>
		</main>
	</div> 

	
<div class="col-sm-3 col-sm-offset-1 doc-sidebar">
	<div class="sidebar-module">
		<div class="sidebar-toc">
			<h4>Table of Contents</h4>
			<ul>
				<li><strong><a href="#title">Eclipse CDT Cross Platform Development Within A Chroot Environment</a></strong></li>
			</ul>
			
		</div>
	</div>
	<div class="sidebar-module">
		<h4>Tags</h4>
		<div class="tag-box">
		
        <span class="tag-item"><a href="http://jotschi.de//tags/debian">#debian</a></span>
        
        <span class="tag-item"><a href="http://jotschi.de//tags/eclipse-cdt">#eclipse cdt</a></span>
        
        <span class="tag-item"><a href="http://jotschi.de//tags/chroot">#chroot</a></span>
        
		</div>
	</div>
</div>

</div> 


<hr />

<div class="row">
	<div class="col-sm-8">
		<p class="doc-footer-em"><a href="#">Back to TOP</a></p>
	</div>
</div>

</div> 

<footer class="doc-footer">
	
	
</footer>



<script src="http://jotschi.de//js/jquery-1.11.2.min.js"></script>
<script src="http://jotschi.de//js/bootstrap.min.js"></script>

<script src="http://jotschi.de//js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="http://jotschi.de//js/ie10-viewport-bug-workaround.js"></script>

</body>
</html>