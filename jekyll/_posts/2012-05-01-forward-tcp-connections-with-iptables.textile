--- 
layout: post
status: publish
published: true
title: Forward TCP Connections with Iptables
author: Jotschi
author_login: admin
author_email: webmaster@jotschi.de
author_url: http://www.Jotschi.de
excerpt: |
  Sometimes it is useful to forward a tcp connection to another server. For example if you want to switch a web service to another servers with no DNS delay.

wordpress_id: 776
wordpress_url: /?p=776
date: 2012-05-01 11:49:47 +00:00
categories: 
- Uncategorized
tags: [linux]

comments: 
- id: 7725
  author: Berni
  author_email: berni@bcserv.eu
  author_url: ""
  date: 2012-10-30 15:20:15 +0000
  date_gmt: 2012-10-30 13:20:15 +0000
  content: awesome :) Now I understand why it's called the "web".
---

Sometimes it is useful to forward a tcp connection to another server. For example if you want to switch a web service to another servers with no DNS delay.
<a id="more"></a><a id="more-776"></a>

You have to enable ip_forward and nat for the given port using iptables.
<pre class="syntax c">
# echo 1 > /proc/sys/net/ipv4/ip_forward
# iptables -t nat -A PREROUTING -p tcp --dport 80 -j DNAT --to-destination someip:80
# iptables -t nat -A POSTROUTING -j MASQUERADE
</pre>
