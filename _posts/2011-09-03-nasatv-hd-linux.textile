--- 
layout: post
status: publish
published: true
title: NasaTV HD Linux
author: Jotschi
author_login: admin
author_email: webmaster@jotschi.de
author_url: http://www.Jotschi.de
excerpt: I just found a very useful script to download the Nasatv HD stream on linux. The script was written by the user Naito. I found it <a href="http://forum.nasaspaceflight.com/index.php?topic=19846.990;wap2">here</a>
wordpress_id: 632
wordpress_url: /?p=632
date: 2011-09-03 16:07:26 +00:00
categories: 
- Uncategorized
tags: 
- nasa
- nasatv
- linux
- hd
- stream
comments: 
- id: 4203
  author: Kinux
  author_email: rainbowcastel@gmail.com
  author_url: ""
  date: 2011-11-26 18:12:31 +0000
  date_gmt: 2011-11-26 16:12:31 +0000
  content: |-
    I thank you sir. This script saved my day recording today's NASA Mars Laboratory Launch transmission.
    
    Thank you.
---
I just found a very useful script to download the Nasatv HD stream on linux. The script was written by the user Naito. I found it <a href="http://forum.nasaspaceflight.com/index.php?topic=19846.990;wap2">here</a><a id="more"></a><a id="more-632"></a>

<pre class="syntax c">
#!/bin/bash
filename="NASA-TV-HD.`date +%y%m%d-%s`"

httpurl='http://liveips.nasa.gov.edgesuite.net/msfc/Wifi.m3u8'
trap "break; echo Finished recording. ; exit 0" SIGINT SIGTERM

echo -n Buffering
#Get initial set of files
for nextfile in $(curl -s $httpurl | grep '.ts'); do
        echo -n .
        curl -s "$nextfile" >> $filename.ts
        lastfile="$nextfile"
done

echo 100\%

echo Starting continuous recording. Press CTRL-C to quit.
while true; do
        nextfile=$(curl -s $httpurl | grep '.ts' | tail -1)
        if [ "$nextfile" != "$lastfile" ]; then
                curl -s "$nextfile" >> $filename.ts
                lastfile="$nextfile"
        fi
 #File list updates every 10 seconds, but don't want to sleep too long and miss an update!
        sleep 7
done
</pre>
