--- 
layout: post
status: publish
published: true
title: Bandwidth Controlling for Apache2 (Lenny)
author: Jotschi
author_login: Jotschi
author_email: webmaster@jotschi.de
author_url: http://www.jotschi.de
excerpt: "<p lang=\"en\">\r\n\
  Sometimes its usefull to throttle your bandwith within apache. There are two modules available <strong>mod_cband</strong> or <strong>mod_bw</strong>.\r\n\
  </p>\r\n\
  <p lang=\"de\">\r\n\
  Manchmal ist es von Vorteil wenn man die Bandbreite von Apache drosseln kann. Es gibt zwei Module die hierzu M\xC3\x83\xC2\xB6glichkeiten anbieten die ich gefunden habe. Zum einen <strong>mod_cband</strong> oder <strong>mod_bw</strong>.\r\n\
  </p>\r\n"
wordpress_id: 182
wordpress_url: /?p=182
date: 2008-12-02 21:41:09 +00:00
categories: 
- Uncategorized
tags: 
- lenny
- debian
- apache2
- mod_bw
comments: []

---
Sometimes its usefull to throttle your bandwith within apache. There are two modules available <strong>mod_cband</strong> or <strong>mod_bw</strong>.

<a id="more"></a><a id="more-182"></a>

I just tested mod_bw which can be downloaded here: <a href="http://www.ivn.cl/apache/">http://www.ivn.cl/apache/</a>

Installed Apache Versions:

{% snippet c %}
ii  apache2-mpm-prefork  2.2.9-10     Apache HTTP Server - traditional non-threade
ii  apache2-prefork-dev    2.2.9-10     Apache development headers - non-threaded MP
ii  apache2-utils                2.2.9-10     utility programs for webservers</blockquote>
{% endsnippet %}

1. apt-get install apache2-prefork-dev 
2. download and extract mod_bw-0.8.tgz
3. sudo apxs2 -i -a -c mod_bw.c 
4. Add the following line to httpd.conf:

{% snippet c %}
LoadModule bw_module /usr/lib/apache2/modules/mod_bw.so
{% endsnippet %}

5. Add limitation to VirtualHost (sites-available/default)

{% snippet c %}
<VirtualHost *:80>
        ServerAdmin webmaster@localhost

        BandwidthModule On
        ForceBandWidthModule On
        Bandwidth all 10240
        MinBandwidth all -1

        DocumentRoot /var/www/
        <Directory />
                Options +ExecCGI +Includes
                AllowOverride None
                Allow from all
        </Directory>
        ErrorLog /var/log/apache2/error.log
        LogLevel warn
        CustomLog /var/log/apache2/access.log combined
        ServerSignature On
</VirtualHost>
{% endsnippet %}

Another blogpost that contains also an howto based on mod_cband <a href="http://www.uno-code.com/?q=node/64">http://www.uno-code.com/?q=node/64</a>
