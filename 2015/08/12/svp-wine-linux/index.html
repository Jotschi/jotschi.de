<!DOCTYPE html>


<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="alternate" href="/index.xml" type="application/rss+xml" title="Jotschi&#39;s Blog">
		<link rel="icon" href="http://jotschi.de/favicon.ico">
		<title>SVP with Wine on Linux - Jotschi&#39;s Blog</title>
		
		<link rel="stylesheet" href="http://jotschi.de/css/highlight.js.min.css">
		<link rel="stylesheet" href="http://jotschi.de/css/bootstrap.min.css">
		<link rel="stylesheet" href="http://jotschi.de/css/bootstrap-theme.css">
		<link rel="stylesheet" href="http://jotschi.de/css/theme.css">
		<link rel="stylesheet" href="http://jotschi.de/css/bootie-docs.css">
	</head>

<body role="document">

	
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="http://jotschi.de/">Jotschi&#39;s Blog</a>
			</div>
			<div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li ><a href="http://jotschi.de/">Home</a></li>
			
				
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Categories<span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
						
							<li><a href="http://jotschi.de/categories/code">Code</a></li>
						
							<li><a href="http://jotschi.de/categories/electronics">Electronics</a></li>
						
							<li><a href="http://jotschi.de/categories/gfx">Gfx</a></li>
						
							<li><a href="http://jotschi.de/categories/linux">Linux</a></li>
						
							<li><a href="http://jotschi.de/categories/random">Random</a></li>
						
							<li><a href="http://jotschi.de/categories/space">Space</a></li>
						
						</ul>
					</li>
				
				</ul>
			</div>
		</div>
	</nav>

<div class="container">

<div class="row">
	<div class="col-sm-8 doc-main">
		<main role="main">
			<article>
				<a id="title"></a>
				<h1 class="doc-entry-title">SVP with Wine on Linux</h1>
				<div class="doc-entry-meta">
					<span><time datetime="2015-08-12">August 12, 2015</time></span>
				</div>
				<section>
					<div class="sect1">
<h2 id="_requirements">Requirements:</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Wine</p>
</li>
<li>
<p>avconv</p>
</li>
<li>
<p>libx264</p>
</li>
<li>
<p>The installed tools and plugins below</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install_svp_using_wine">Install SVP using wine</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Download and install "SVP":http://www.svp-team.com/wiki/Download
Don&#8217;t install MPC or SVPTube. We&#8217;ll not need those tools.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">wine SVP_3.1.7.exe</code></pre>
</div>
</div>
<div class="paragraph">
<p>For some reason the installation process has not updated the system32 lib. We need to overwrite the dll with the one that was provided by SVP.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">cp ~/.wine/drive_c/Program Files/SVP/Resources/Avisynth/avisynth.dll ~/.wine/drive_c/windows/system32</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_download_a_href_http_akuvian_org_src_avisynth_avs2yuv_avs2yuv_exe_a">Download <a href="http://akuvian.org/src/avisynth/avs2yuv/">avs2yuv.exe</a></h3>

</div>
<div class="sect2">
<h3 id="_download_the_a_href_https_github_com_ffms_ffms2_releases_ffms2_plugin_a_for_avisynth_from_github">Download the <a href="https://github.com/FFMS/ffms2/releases">ffms2 plugin</a> for avisynth from github.</h3>
<div class="paragraph">
<p>I used ffms2-2.21-icl.7z and extract the ffms2.dll that matches your architecture.</p>
</div>
</div>
<div class="sect2">
<h3 id="_download_the_svp_mvtools">Download the SVP MVTools</h3>
<div class="paragraph">
<p>I used the <a href="http://www.svp-team.com/wiki/Plugins:_MVTools2#Downloads">mvtools-2.5.11.9-svp tools</a></p>
</div>
<div class="paragraph">
<p>We&#8217;ll need the following DLL files from that archiv:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>libflowsse.dll</p>
</li>
<li>
<p>mvtools2.dll</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Place all the mentioned dll&#8217;s in one folder.</p>
</div>
<div class="paragraph">
<p>The folder should now contain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>libflowsse.dll</p>
</li>
<li>
<p>mvtools2.dll</p>
</li>
<li>
<p>avs2yuv.exe</p>
</li>
<li>
<p>ffms2.dll</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Create a avs script called script.avs which has this content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">SetMemoryMax(1024)

pel=2
recalc=true

svp_flow_lib="libflowsse.dll"
LoadPlugin("ffms2.dll")
LoadPlugin("mvtools2.dll")

SetMTMode(3,10)

FFVideoSource("YOUR_VIDEO.mkv").ConvertToYV12()

SetMTMode(2)

super=MSuper(pel=pel)
finest=pel==1 ? super : MFinest(super)

backward_vec=MAnalyse(super, isb=true, blksize=16, overlap=4)
forward_vec=MAnalyse(super, isb=false, blksize=16, overlap=4)

# I don't know why but these lines are not working for me. My avisync can't parse those lines and aborts
#backward_vec = recalc == 0 ? backward_vec : MRecalculate(super, backward_vec, blksize=8, overlap=2)
#forward_vec  = recalc == 0 ? forward_vec  : MRecalculate(super, forward_vec, blksize=8, overlap=2)

MSmoothFps(super, backward_vec, forward_vec, finest=finest, num=60, den=1, algo=13, sadml=200, blend=false)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Update the placeholder in the script and trigger the processing using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">wine avs2yuv script.avs - | avconv -i - -c:v libx264 -crf 20 -tune film -preset slow -y output.mp4 -f yuv4mpegpipe</code></pre>
</div>
</div>
<div class="paragraph">
<p>The smoothed video will directly be encoded using libx264 and the result will be written to output.mp4. This process only works for the video and you would need to muxin the sound after this process.</p>
</div>
</div>
</div>
</div>

				</section>
			</article>
		</main>
	</div> 

	
<div class="col-sm-3 col-sm-offset-1 doc-sidebar">
	<div class="sidebar-module">
		<div class="sidebar-toc">
			<h4>Table of Contents</h4>
			<ul>
				<li><strong><a href="#title">SVP with Wine on Linux</a></strong></li>
			</ul>
			
		</div>
	</div>
	<div class="sidebar-module">
		<h4>Tags</h4>
		<div class="tag-box">
		
        <span class="tag-item"><a href="http://jotschi.de/tags/linux">#linux</a></span>
        
        <span class="tag-item"><a href="http://jotschi.de/tags/wine">#wine</a></span>
        
        <span class="tag-item"><a href="http://jotschi.de/tags/avisynth">#avisynth</a></span>
        
		</div>
	</div>
</div>

</div> 


<hr />

<div class="row">
	<div class="col-sm-8">
		<p class="doc-footer-em"><a href="#">Back to TOP</a></p>
	</div>
</div>

</div> 

<footer class="doc-footer">
	
	
</footer>



<script src="http://jotschi.de/js/jquery-1.11.2.min.js"></script>
<script src="http://jotschi.de/js/bootstrap.min.js"></script>

<script src="http://jotschi.de/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="http://jotschi.de/js/ie10-viewport-bug-workaround.js"></script>

</body>
</html>